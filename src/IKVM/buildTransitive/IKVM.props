<Project>
    <PropertyGroup>
        <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
    </PropertyGroup>

    <Import Project="$(MSBuildThisFileDirectory)..\targets\generated.props" Condition="Exists('$(MSBuildThisFileDirectory)..\targets\generated.props')" />

    <PropertyGroup>
        <IkvmKeyFile Condition=" '$(IkvmKeyFile)' == '' And Exists('$(MSBuildThisFileDirectory)..\ikvm.snk') ">$(MSBuildThisFileDirectory)..\ikvm.snk</IkvmKeyFile>
    </PropertyGroup>

    <ItemGroup>
        <IkvmAvailableRuntimeIdentifiers Include="win;linux;osx" />
    </ItemGroup>

    <ItemGroup Condition="$([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net461'))">
        <None Include="$(MSBuildThisFileDirectory)..\runtimes\**\native\ikvm.dll" LinkBase="runtimes">
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
            <TargetPath>runtimes\%(RecursiveDir)native\%(Filename)%(Extension)</TargetPath>
        </None>
    </ItemGroup>

    <Import Project="IKVM.IkvmReference.props" />
</Project>
